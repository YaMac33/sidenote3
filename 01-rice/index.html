<!-- Chosen Palette: Rice Paper & Gold (Warm Neutrals) - Background: #fdfbf7, Text: #2d3748, Primary Accent: #d69e2e (Gold), Secondary: #4299e1 (Blue), Alert: #e53e3e -->
<!-- Application Structure Plan: A 'Deep Dive' Dashboard structure. 
     1. Header: High-impact title and quick summary of the policy context.
     2. 'The Core Conflict' (Interactive Tabs): Users explore the three main pillars of criticism (Cost, Local Rebellion, Usability). This allows focused reading without overwhelming text.
     3. 'Consumer Impact Simulator' (Interactive Calculator): A slider-based tool to demonstrate the 'Usability' argument (Out-of-pocket expense) with a real-time Doughnut chart. This makes the "financial burden" abstract concept concrete.
     4. 'Regional Fragmentation' (Status Board): A visual breakdown of how different municipalities are reacting (Cash vs Coupon vs Utility), visualized with a Pie chart to show the political split.
     5. Conclusion: Summary of future outlook.
     Why? The source material is a debate/issue analysis. A dashboard allows users to jump between the 'Political' (Local Gov), 'Economic' (Cost), and 'Personal' (Usability) aspects easily. -->
<!-- Visualization & Content Choices:
     1. Policy Context: Text cards. Goal: Inform.
     2. Cost Comparison (Chart.js Bar): Goal: Compare. Compares the theoretical administrative burden of Coupons vs Cash to visualize the 'Waste' argument.
     3. Consumer Burden (Chart.js Doughnut): Goal: Inform/Change. Updates dynamically as user adjusts 'Rice Price' slider. Visualizes the 'Out of Pocket' expense, making the '3000 yen limit' tangible.
     4. Municipality Response (Chart.js Pie): Goal: Relationships/Proportion. Visualizes the fragmentation of responses (Coupon vs Cash vs Utility Cuts) to highlight the 'Rebellion'.
     5. Interaction: Vanilla JS for tab switching and slider logic.
     Confirmation: NO SVG graphics used. NO Mermaid JS used. -->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚³ãƒ¡åˆ¸å•é¡Œï¼šå¾¹åº•è§£èª¬ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #fdfbf7; color: #2d3748; }
        .chart-container { position: relative; width: 100%; max-width: 500px; margin: 0 auto; height: 300px; max-height: 300px; }
        .card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); transition: transform 0.2s; }
        .card:hover { transform: translateY(-2px); }
        .tab-active { border-bottom: 3px solid #d69e2e; color: #d69e2e; font-weight: 700; }
        .tab-inactive { color: #718096; hover:text-gray-700; }
        /* Range Slider Styling */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: #d69e2e; cursor: pointer; margin-top: -8px; box-shadow: 0 1px 3px rgba(0,0,0,0.3); }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #e2e8f0; border-radius: 2px; }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <span class="text-3xl">ğŸš</span>
                <div>
                    <h1 class="text-xl md:text-2xl font-bold text-gray-800 tracking-tight">ã‚³ãƒ¡åˆ¸å•é¡Œ <span class="text-yellow-600">å¾¹åº•è§£èª¬</span></h1>
                    <p class="text-xs text-gray-500 hidden md:block">ä»¤å’Œã®ã‚³ãƒ¡é¨’å‹•ï¼Ÿãã®èƒŒæ™¯ã¨èª²é¡Œã‚’3åˆ†ã§ç†è§£ã™ã‚‹</p>
                </div>
            </div>
            <button onclick="window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'})" class="bg-yellow-600 hover:bg-yellow-700 text-white text-sm px-4 py-2 rounded-full font-bold transition">
                æœ€æ–°çŠ¶æ³ã‚’ç¢ºèª
            </button>
        </div>
    </header>

    <main class="flex-grow max-w-6xl mx-auto px-4 py-8 space-y-12 w-full">

        <!-- Intro Section -->
        <section class="grid md:grid-cols-2 gap-8 items-center">
            <div class="space-y-4">
                <div class="inline-block bg-blue-100 text-blue-800 text-xs font-bold px-3 py-1 rounded-full">2026å¹´æ˜¥ å®Ÿæ–½äºˆå®š</div>
                <h2 class="text-3xl md:text-4xl font-bold leading-tight">ãªãœä»Šã€<br>ã€ŒãŠã“ã‚åˆ¸ã€ãªã®ã‹ï¼Ÿ</h2>
                <p class="text-lg text-gray-600 leading-relaxed">
                    2025å¹´æœ«ã€æ”¿åºœã¯ç‰©ä¾¡é«˜é¨°å¯¾ç­–ã¨ã—ã¦<span class="font-bold text-gray-900 border-b-2 border-yellow-400">ä½æ°‘1äººã‚ãŸã‚Šç´„3,000å††ç›¸å½“</span>ã®ãŠã“ã‚åˆ¸ï¼ˆã¾ãŸã¯ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¯ãƒ¼ãƒãƒ³ï¼‰é…å¸ƒã‚’æ±ºå®šã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã®æ”¿ç­–ã¯ç™ºè¡¨ç›´å¾Œã‹ã‚‰ã€Œã‚³ã‚¹ãƒˆã€ã€Œè‡ªæ²»ä½“ã®åä¹±ã€ã€Œä½¿ã„å‹æ‰‹ã€ã®3ã¤ã®è¦–ç‚¹ã§çŒ›çƒˆãªæ‰¹åˆ¤ã‚’æµ´ã³ã¦ã„ã¾ã™ã€‚
                </p>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div class="card p-6 text-center border-t-4 border-yellow-500">
                    <div class="text-3xl mb-2">ğŸ’°</div>
                    <div class="text-sm text-gray-500 font-bold">æ”¯æ´é¡</div>
                    <div class="text-2xl font-bold text-gray-800">3,000å††<span class="text-sm font-normal">ç›¸å½“</span></div>
                </div>
                <div class="card p-6 text-center border-t-4 border-blue-500">
                    <div class="text-3xl mb-2">ğŸ“…</div>
                    <div class="text-sm text-gray-500 font-bold">é…å¸ƒé–‹å§‹</div>
                    <div class="text-2xl font-bold text-gray-800">2026å¹´æ˜¥</div>
                </div>
                <div class="card p-6 text-center border-t-4 border-red-500 col-span-2">
                    <div class="text-3xl mb-2">âš ï¸</div>
                    <div class="text-sm text-gray-500 font-bold">æ‡¸å¿µç‚¹</div>
                    <div class="text-lg font-bold text-gray-800">çµŒè²»ãƒ»å®Ÿç”¨æ€§ãƒ»è‡ªæ²»ä½“è² æ‹…</div>
                </div>
            </div>
        </section>

        <!-- Interactive Explorer: The 3 Problems -->
        <section class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100">
            <div class="p-8 pb-0">
                <h3 class="text-2xl font-bold mb-2">æ‰¹åˆ¤ã®æ ¸å¿ƒï¼š3ã¤ã®è«–ç‚¹</h3>
                <p class="text-gray-600 mb-6">ãªãœã“ã‚Œã»ã©è­°è«–ã«ãªã£ã¦ã„ã‚‹ã®ã‹ï¼Ÿã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆã¦å„è¦–ç‚¹ã®è©³ç´°ã¨ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¾ã™ã€‚</p>
                
                <!-- Tab Navigation -->
                <div class="flex border-b border-gray-200 overflow-x-auto">
                    <button id="tab-cost" onclick="switchTab('cost')" class="flex-1 py-4 px-6 text-center focus:outline-none whitespace-nowrap tab-active transition-colors">
                        â‘  ã‚³ã‚¹ãƒˆã¨åˆ©æ¨©
                    </button>
                    <button id="tab-local" onclick="switchTab('local')" class="flex-1 py-4 px-6 text-center focus:outline-none whitespace-nowrap tab-inactive transition-colors">
                        â‘¡ è‡ªæ²»ä½“ã®åä¹±
                    </button>
                    <button id="tab-user" onclick="switchTab('user')" class="flex-1 py-4 px-6 text-center focus:outline-none whitespace-nowrap tab-inactive transition-colors">
                        â‘¢ ä½¿ã„å‹æ‰‹
                    </button>
                </div>
            </div>

            <!-- Tab Content Area -->
            <div class="p-8 bg-gray-50 min-h-[400px]">
                
                <!-- CONTENT: COST -->
                <div id="content-cost" class="grid md:grid-cols-2 gap-8 items-center animate-fade-in">
                    <div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">è«å¤§ãªäº‹å‹™çµŒè²»ã¨ã€Œä¸­æŠœãã€ç–‘æƒ‘</h4>
                        <ul class="space-y-3 mb-6">
                            <li class="flex items-start"><span class="text-red-500 mr-2">â—</span><span>ç´™ã®åˆ¸ã®å°åˆ·ãƒ»å°å…¥ãƒ»éƒµé€ã«ã‹ã‹ã‚‹ã‚³ã‚¹ãƒˆãŒç”šå¤§ã€‚</span></li>
                            <li class="flex items-start"><span class="text-red-500 mr-2">â—</span><span>ã€Œç¾é‡‘ã‚’æŒ¯ã‚Šè¾¼ã‚“ã æ–¹ãŒã€æ—©ãã¦å®‰ä¸ŠãŒã‚Šã€ã¨ã„ã†æŒ‡æ‘˜ã€‚</span></li>
                            <li class="flex items-start"><span class="text-red-500 mr-2">â—</span><span>ç™ºè¡Œæ¥­å‹™ã‚’è«‹ã‘è² ã†ç‰¹å®šã®æ¥­ç•Œå›£ä½“ã¸ã®åˆ©ç›Šèª˜å°ï¼ˆä¸­æŠœãï¼‰ã§ã¯ãªã„ã‹ã¨ã®æ‰¹åˆ¤ã€‚</span></li>
                        </ul>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                            <p class="text-sm text-yellow-800"><strong>ãƒã‚¤ãƒ³ãƒˆ:</strong> æ”¿ç­–ã®ç›®çš„ãŒã€Œå›½æ°‘æ”¯æ´ã€ãªã®ã‹ã€Œæ¥­ç•Œæ”¯æ´ã€ãªã®ã‹ãŒå•ã‚ã‚Œã¦ã„ã¾ã™ã€‚</p>
                        </div>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="chart-container">
                            <canvas id="costChart"></canvas>
                        </div>
                        <p class="text-xs text-gray-500 mt-2 text-center">â€»æ¦‚å¿µå›³ï¼šç¾é‡‘çµ¦ä»˜ã¨ç¾ç‰©æ”¯çµ¦ã®ä¸€èˆ¬çš„ã‚³ã‚¹ãƒˆæ¯”è¼ƒã‚¤ãƒ¡ãƒ¼ã‚¸</p>
                    </div>
                </div>

                <!-- CONTENT: LOCAL GOV -->
                <div id="content-local" class="hidden grid md:grid-cols-2 gap-8 items-center animate-fade-in">
                    <div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">ç¾å ´ã‹ã‚‰ã®ã€ŒNOã€çªãä¸Šã’</h4>
                        <p class="text-gray-700 mb-4">
                            ã€Œäº‹å‹™è² æ‹…ãŒç„¡é§„ã«å¤§ãã„ã€ã¨ã—ã¦ã€æ”¿åºœã®æ–¹é‡ã«ç•°è­°ã‚’å”±ãˆã‚‹é¦–é•·ãŒç¶šå‡ºã—ã¦ã„ã¾ã™ã€‚å›½ã¨åœ°æ–¹ã®å¯¾ç«‹æ§‹å›³ãŒé®®æ˜ã«ãªã‚Šã¾ã—ãŸã€‚
                        </p>
                        <div class="space-y-4">
                            <div class="bg-white p-4 rounded-lg shadow border-l-4 border-blue-500">
                                <h5 class="font-bold text-blue-900">å¤§é˜ªåºœ äº¤é‡å¸‚ãªã©</h5>
                                <p class="text-sm text-gray-600">é…å¸ƒã‚’æ‹’å¦ã€‚ç‹¬è‡ªã®ç¾é‡‘çµ¦ä»˜ã¸åˆ‡ã‚Šæ›¿ãˆæ–¹é‡ã€‚</p>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                                <h5 class="font-bold text-green-900">é™å²¡çœŒ å¯Œå£«å¸‚ãªã©</h5>
                                <p class="text-sm text-gray-600">ãŠã“ã‚åˆ¸ã§ã¯ãªãã€æ°´é“æ–™é‡‘ã®æ¸›å…ãªã©ã®ç”Ÿæ´»æ”¯æ´ç­–ã‚’æ¤œè¨ã€‚</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="chart-container">
                            <canvas id="localChart"></canvas>
                        </div>
                        <p class="text-xs text-gray-500 mt-2 text-center">è‡ªæ²»ä½“å¯¾å¿œã®åˆ†æ–­çŠ¶æ³ï¼ˆã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰</p>
                    </div>
                </div>

                <!-- CONTENT: USER -->
                <div id="content-user" class="hidden grid md:grid-cols-2 gap-8 items-center animate-fade-in">
                    <div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">æ¶ˆè²»è€…ã«ã¨ã£ã¦ã®ã€Œ3ã¤ã®å£ã€</h4>
                        <div class="grid gap-4">
                            <div class="bg-white p-4 rounded border border-gray-200">
                                <span class="font-bold block mb-1">ğŸ’¸ æŒã¡å‡ºã—ç™ºç”Ÿ</span>
                                <p class="text-sm text-gray-600">ã‚³ãƒ¡ä¾¡æ ¼é«˜é¨°ä¸­ã€‚3,000å††åˆ†ã®åˆ¸ã§ã¯5kgã®ã‚³ãƒ¡ã¯è²·ãˆãšã€ç¾é‡‘ã®è¿½åŠ ãŒå¿…è¦ã€‚</p>
                            </div>
                            <div class="bg-white p-4 rounded border border-gray-200">
                                <span class="font-bold block mb-1">â³ æœŸé™ã¨ä¸ä¾¿ã•</span>
                                <p class="text-sm text-gray-600">ãŠé‡£ã‚ŠãŒå‡ºãªã„ã€‚2026å¹´9æœˆæœ«ã®ä½¿ç”¨æœŸé™ãŒã‚ã‚Šã€ä½¿ã„å¿˜ã‚Œãƒªã‚¹ã‚¯ã‚‚ã€‚</p>
                            </div>
                            <div class="bg-white p-4 rounded border border-gray-200">
                                <span class="font-bold block mb-1">ğŸ ä¸å…¬å¹³æ„Ÿ</span>
                                <p class="text-sm text-gray-600">ãŠç±³ã‚’é£Ÿã¹ãªã„å®¶åº­ã€ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã®ã‚ã‚‹å®¶åº­ã«ã¯æ©æµãŒãªã„ã€‚</p>
                            </div>
                        </div>
                    </div>
                    <!-- Simulation Interactive -->
                    <div class="bg-white p-6 rounded-xl shadow-inner border border-gray-200 w-full">
                        <h5 class="font-bold text-gray-800 text-center mb-4">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼šå®Ÿéš›ã„ãã‚‰ã‹ã‹ã‚‹ï¼Ÿ</h5>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-bold text-gray-700 mb-2">ãŠç±³(5kg)ã®åº—é ­ä¾¡æ ¼: <span id="price-display" class="text-blue-600 text-lg">3,500</span>å††</label>
                            <input type="range" min="2000" max="5000" step="100" value="3500" id="ricePriceSlider" class="w-full">
                            <div class="flex justify-between text-xs text-gray-400 mt-1">
                                <span>2,000å††</span>
                                <span>5,000å††</span>
                            </div>
                        </div>

                        <div class="flex justify-between items-center bg-gray-50 p-4 rounded-lg">
                            <div class="text-center">
                                <p class="text-xs text-gray-500">ãŠã“ã‚åˆ¸</p>
                                <p class="font-bold text-yellow-600 text-xl">3,000å††</p>
                            </div>
                            <div class="text-gray-300 font-bold text-xl">-</div>
                            <div class="text-center">
                                <p class="text-xs text-gray-500">ã‚ãªãŸã®è² æ‹…</p>
                                <p id="burden-display" class="font-bold text-red-600 text-xl">500å††</p>
                            </div>
                        </div>
                        <div class="chart-container mt-4" style="height: 150px; max-height: 150px;">
                            <canvas id="userChart"></canvas>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Future Outlook Section -->
        <section class="mb-12">
            <div class="mb-6">
                <h3 class="text-2xl font-bold mb-2">ä»Šå¾Œã®è¦‹é€šã—ï¼šã‚ãªãŸã®è¡—ã¯ã©ã†ãªã‚‹ï¼Ÿ</h3>
                <p class="text-gray-600">è‡ªæ²»ä½“ã®åä¹±ã«ã‚ˆã‚Šã€å¯¾å¿œã¯å…¨å›½ã§ãƒãƒ©ãƒãƒ©ã«ãªã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
                <!-- Scenario A -->
                <div class="card p-6 border-t-4 border-yellow-500 flex flex-col items-center text-center">
                    <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center text-3xl mb-4">ğŸ«</div>
                    <h4 class="font-bold text-lg mb-2">ãŠã“ã‚åˆ¸ãŒå±Šã</h4>
                    <p class="text-sm text-gray-600 mb-4">æ”¿åºœæ–¹é‡é€šã‚Šã«å®Ÿæ–½ã™ã‚‹è‡ªæ²»ä½“ã€‚</p>
                    <span class="mt-auto text-xs bg-gray-100 px-2 py-1 rounded">2026å¹´æ˜¥ä»¥é™ã€œ</span>
                </div>
                
                <!-- Scenario B -->
                <div class="card p-6 border-t-4 border-blue-500 flex flex-col items-center text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center text-3xl mb-4">ğŸ’´</div>
                    <h4 class="font-bold text-lg mb-2">ç¾é‡‘ãŒæŒ¯ã‚Šè¾¼ã¾ã‚Œã‚‹</h4>
                    <p class="text-sm text-gray-600 mb-4">äº¤é‡å¸‚ãªã©ã®ã‚ˆã†ã«ã€ã‚³ã‚¹ãƒˆå‰Šæ¸›ã¨åˆ©ä¾¿æ€§ã‚’å„ªå…ˆã™ã‚‹è‡ªæ²»ä½“ã€‚</p>
                    <span class="mt-auto text-xs bg-gray-100 px-2 py-1 rounded">ç‹¬è‡ªçµ¦ä»˜</span>
                </div>

                <!-- Scenario C -->
                <div class="card p-6 border-t-4 border-green-500 flex flex-col items-center text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-3xl mb-4">ğŸ’§</div>
                    <h4 class="font-bold text-lg mb-2">å…¬å…±æ–™é‡‘ãŒå®‰ããªã‚‹</h4>
                    <p class="text-sm text-gray-600 mb-4">å¯Œå£«å¸‚ãªã©ã®ã‚ˆã†ã«ã€æ°´é“åŸºæœ¬æ–™é‡‘ã®æ¸›å…ãªã©ã§é‚„å…ƒã™ã‚‹è‡ªæ²»ä½“ã€‚</p>
                    <span class="mt-auto text-xs bg-gray-100 px-2 py-1 rounded">ç”³è«‹ä¸è¦ãªå ´åˆã‚‚</span>
                </div>
            </div>
        </section>

        <!-- Conclusion -->
        <footer class="bg-gray-800 text-white rounded-2xl p-8 text-center">
            <h3 class="text-xl font-bold mb-4">ã¾ã¨ã‚ï¼šæ··ä¹±ã¯ç¶šãè¦‹è¾¼ã¿</h3>
            <p class="max-w-2xl mx-auto text-gray-300 mb-6">
                ã€Œã‚³ãƒ¡åˆ¸å•é¡Œã€ã¯ã€å˜ãªã‚‹ã‚¯ãƒ¼ãƒãƒ³ã®æ˜¯éã‚’è¶…ãˆã€æ”¿åºœã®ã‚³ã‚¹ãƒˆæ„Ÿè¦šã‚„åœ°æ–¹è‡ªæ²»ã®ã‚ã‚Šæ–¹ã‚’å•ã†å¤§ããªè­°è«–ã¨ãªã£ã¦ã„ã¾ã™ã€‚
                ãŠä½ã¾ã„ã®åœ°åŸŸãŒã©ã®ã‚ˆã†ãªå¯¾å¿œã‚’ã¨ã‚‹ã‹ã€è‡ªæ²»ä½“ã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã§æœ€æ–°æƒ…å ±ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
            </p>
            <div class="flex justify-center space-x-4">
                <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold transition">
                    è‡ªæ²»ä½“HPã‚’æ¤œç´¢
                </button>
                <button class="bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-bold transition">
                    ãƒ‹ãƒ¥ãƒ¼ã‚¹è©³ç´°ã‚’è¦‹ã‚‹
                </button>
            </div>
        </footer>

    </main>

    <script>
        // State
        let currentTab = 'cost';
        const couponValue = 3000;
        
        // Chart Instances
        let costChartInstance = null;
        let localChartInstance = null;
        let userChartInstance = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initCostChart();
            // Initial Tab setup
            switchTab('cost');
            
            // Slider Event Listener
            const slider = document.getElementById('ricePriceSlider');
            slider.addEventListener('input', updateSimulation);
        });

        // Tab Switching Logic
        function switchTab(tabId) {
            // Update Tab Styles
            ['cost', 'local', 'user'].forEach(id => {
                const btn = document.getElementById(`tab-${id}`);
                const content = document.getElementById(`content-${id}`);
                
                if (id === tabId) {
                    btn.classList.remove('tab-inactive');
                    btn.classList.add('tab-active');
                    content.classList.remove('hidden');
                    // Initialize charts when tab becomes visible (needed for Chart.js responsiveness in hidden divs)
                    if (id === 'local' && !localChartInstance) initLocalChart();
                    if (id === 'user') {
                        if (!userChartInstance) initUserChart();
                        updateSimulation(); // Ensure correct initial state
                    }
                } else {
                    btn.classList.remove('tab-active');
                    btn.classList.add('tab-inactive');
                    content.classList.add('hidden');
                }
            });
            currentTab = tabId;
        }

        // Simulation Logic
        function updateSimulation() {
            const price = parseInt(document.getElementById('ricePriceSlider').value);
            const burden = Math.max(0, price - couponValue);
            
            document.getElementById('price-display').innerText = price.toLocaleString();
            document.getElementById('burden-display').innerText = burden.toLocaleString() + 'å††';

            if (userChartInstance) {
                userChartInstance.data.datasets[0].data = [couponValue, burden];
                // Update color if burden is high
                userChartInstance.update();
            }
        }

        // --- Charts ---

        // Chart 1: Cost Comparison (Bar)
        function initCostChart() {
            const ctx = document.getElementById('costChart').getContext('2d');
            costChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['ç¾é‡‘çµ¦ä»˜', 'ãŠã“ã‚åˆ¸é…å¸ƒ'],
                    datasets: [
                        {
                            label: 'äº‹å‹™çµŒè²» (æ¨è¨ˆã‚¤ãƒ¡ãƒ¼ã‚¸)',
                            data: [30, 90], // Conceptual data: Cash is cheaper, Coupon is expensive
                            backgroundColor: ['#4299e1', '#e53e3e'],
                            borderRadius: 6,
                        },
                        {
                            label: 'å›½æ°‘ã¸ã®é‚„å…ƒé¡',
                            data: [100, 100], // Same value
                            backgroundColor: '#e2e8f0',
                            borderRadius: 6,
                            hidden: true // Hide to focus on cost difference
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' },
                        title: { display: true, text: 'äº‹å‹™çµŒè²»ã®æ¯”è¼ƒã‚¤ãƒ¡ãƒ¼ã‚¸' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + (context.dataIndex === 1 ? 'é«˜ã‚³ã‚¹ãƒˆï¼ˆå°åˆ·ãƒ»éƒµé€ï¼‰' : 'ä½ã‚³ã‚¹ãƒˆï¼ˆæŒ¯è¾¼ï¼‰');
                                }
                            }
                        }
                    },
                    scales: {
                        y: { display: false, beginAtZero: true },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        // Chart 2: Municipality Split (Pie)
        function initLocalChart() {
            const ctx = document.getElementById('localChart').getContext('2d');
            localChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['ãŠã“ã‚åˆ¸é…å¸ƒ', 'ç¾é‡‘çµ¦ä»˜ã¸å¤‰æ›´', 'å…¬å…±æ–™é‡‘æ¸›å…', 'æœªå®š'],
                    datasets: [{
                        data: [40, 25, 15, 20], // Conceptual split
                        backgroundColor: ['#d69e2e', '#4299e1', '#48bb78', '#cbd5e0'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' },
                        title: { display: true, text: 'è‡ªæ²»ä½“ã®å¯¾å¿œäºˆæ¸¬' }
                    }
                }
            });
        }

        // Chart 3: User Burden (Doughnut)
        function initUserChart() {
            const ctx = document.getElementById('userChart').getContext('2d');
            userChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['ã‚¯ãƒ¼ãƒãƒ³åˆ©ç”¨', 'è‡ªå·±è² æ‹…'],
                    datasets: [{
                        data: [3000, 500],
                        backgroundColor: ['#d69e2e', '#e53e3e'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    }
                }
            });
        }

    </script>
</body>
</html>
