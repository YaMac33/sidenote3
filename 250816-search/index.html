<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>25.8.16 é™çš„ã‚µã‚¤ãƒˆã§å°å…¥ã™ã‚‹ã‚µã‚¤ãƒˆå†…æ¤œç´¢ï¼šLunr.jsï¼ˆè‡ªåŠ›ï¼‰ã¨Algoliaï¼ˆå¤–éƒ¨ï¼‰ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³è§£èª¬ ğŸ” | SideNote</title>
  <meta name="description" content="<<<META_DESCRIPTION>>>">
  <!-- Google tag (gtag.js) - GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MQ9ZB4LYWP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-MQ9ZB4LYWP');
  </script>
  <style>
    :root{
      --teal:#008080;
      --teal-600:#007171;
      --accent:#00aaff;
      --gray-900:#222;
      --gray-700:#444;
      --gray-600:#666;
      --gray-500:#888;
      --gray-200:#eee;
      --gray-150:#f3f5f7;
      --white:#fff;
      --shadow:0 6px 24px rgba(0,0,0,.08);
      --radius:14px;
      --maxw:1200px;
      --header-h:78px;
    }
    /* ---------- Reset (minimal) ---------- */
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    img{max-width:100%;height:auto;display:block}
    a{color:inherit;text-decoration:none}
    ul,ol{padding-left:1.3em}
    code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}

    /* ---------- Header (Fixed) ---------- */
    .site-header {
      background-color:#fff;
      padding:20px 20px;
      position:fixed; top:0; width:100%; z-index:1000;
      border-bottom:1px solid #e9eef3;
      box-shadow: 0 2px 12px rgba(0,0,0,0.03);
    }
    .header-container {
      max-width:var(--maxw);
      margin:0 auto;
      display:flex; justify-content:space-between; align-items:center;
    }
    .logo { font-size:28px; font-weight:bold; letter-spacing:1.5px; transition:color .3s; line-height:1; display:inline-flex; gap:4px; }
    .logo:hover { color:#00aaff; }
    .logo-smart { color:#008080; }
    .logo-side { color:#666666; }

    .main-nav ul { margin:0; padding:0; list-style:none; display:flex; }
    .main-nav li { margin-left:30px; }
    .main-nav a { font-size:16px; padding:5px; position:relative; transition:color .3s; color:var(--gray-700); }
    .main-nav a:hover { color:#00aaff; }
    .main-nav a::after {
      content:''; position:absolute; width:100%; height:2px; background-color:#00aaff;
      bottom:-5px; left:0; transform:scaleX(0); transform-origin:left; transition:transform .3s;
    }
    .main-nav a:hover::after { transform:scaleX(1); }

    /* ---------- Page Layout (Distinct style for this article) ---------- */
    body{
      background:
        radial-gradient(1200px 400px at 50% -200px, rgba(0,170,255,.12), transparent 60%),
        linear-gradient(180deg, #ffffff 0%, #f9fbfc 100%);
      color:var(--gray-900);
    }
    main{ padding-top: calc(var(--header-h) + 32px); }
    .hero{
      margin-top:var(--header-h);
      background: linear-gradient(135deg, rgba(0,170,255,.08), rgba(0,128,128,.08));
      border-bottom:1px solid #e6eef3;
    }
    .hero-inner{
      max-width:var(--maxw); margin:0 auto; padding:48px 20px 36px;
      display:grid; grid-template-columns: 1.2fr .8fr; gap:28px; align-items:center;
    }
    .hero h1{
      margin:0 0 10px; font-size: clamp(26px, 3.2vw, 40px); line-height:1.25;
      letter-spacing:.3px;
    }
    .hero p{ margin:0; color:var(--gray-600); font-size:clamp(14px, 1.8vw, 18px);}
    .hero-badge{
      display:inline-flex; align-items:center; gap:8px; font-size:12px; color:var(--teal);
      background:#e9f7f7; border:1px solid #d2eeee; padding:6px 10px; border-radius:999px; margin-bottom:10px;
    }
    .hero-card{
      background:#fff; border:1px solid #e7eef4; border-radius:16px; box-shadow:var(--shadow);
      padding:18px 16px; display:flex; flex-direction:column; gap:8px;
    }
    .hero-card p{ margin:0; color:var(--gray-600); font-size:14px; }
    .hero-card .dot{ width:8px; height:8px; border-radius:999px; background:var(--accent); display:inline-block; margin-right:6px; }

    .wrap{ max-width:var(--maxw); margin:0 auto; padding:28px 20px 80px; display:grid; grid-template-columns: 280px 1fr; gap:28px; }
    @media (max-width: 960px){
      .hero-inner{ grid-template-columns:1fr; }
      .wrap{ grid-template-columns: 1fr; }
    }

    /* ---------- Sidebar (TOC / Summary) ---------- */
    .toc{
      position:sticky; top: calc(var(--header-h) + 18px);
      background:#fff; border:1px solid #e7eef4; border-radius:var(--radius); padding:16px 14px;
      box-shadow: var(--shadow);
    }
    .toc h3{ margin:0 0 10px; font-size:14px; color:var(--teal-600); letter-spacing:.2px; }
    .toc nav a{
      display:block; padding:8px 10px; margin:3px 0; border-radius:10px; font-size:14px; color:#2b3a44;
      transition:background .2s, color .2s;
    }
    .toc nav a:hover{ background:#f0f8ff; color:#0b6aa8; }

    /* ---------- Article Card ---------- */
    article{
      background:#ffffff; border:1px solid #e6edf3; border-radius:20px; box-shadow:var(--shadow);
      overflow:hidden;
    }
    .article-head{
      padding:18px 22px; background:linear-gradient(180deg,#f7fbfe 0,#ffffff 100%); border-bottom:1px solid #e6edf3;
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
    }
    .meta{
      display:flex; align-items:center; gap:10px; color:var(--gray-600); font-size:13px;
    }
    .pill{
      border:1px solid #d7ebff; background:#eef7ff; color:#0b6aa8; padding:6px 10px; border-radius:999px; font-size:12px;
    }
    .article-body{ padding:26px 22px 38px; }
    .article-body h2{
      margin:34px 0 12px; font-size:22px; border-left:4px solid var(--teal); padding-left:10px; line-height:1.4;
    }
    .article-body h3{ margin:22px 0 8px; font-size:18px; color:var(--gray-700); }
    .article-body p{ margin:10px 0 12px; line-height:1.9; color:#25313b; }
    .article-body ul{ margin:8px 0 18px; }
    .article-body li{ margin:6px 0; }
    blockquote{
      margin:18px 0; padding:14px 16px; background:#f7fbfe; border-left:4px solid var(--accent); color:#244457; border-radius:10px;
    }

    /* ---------- Code Blocks with Copy ---------- */
    pre{
      position:relative; margin:14px 0 18px; border:1px solid #e6edf3; background:#0b1220; color:#f1f5f9;
      border-radius:12px; overflow:auto; box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
    }
    pre code{ display:block; padding:14px 16px; font-size:13px; line-height:1.6; }
    .copy-btn{
      position:absolute; top:8px; right:8px; border:none; background:#14213a; color:#e6f3ff; font-size:12px;
      padding:6px 10px; border-radius:9px; cursor:pointer; transition:opacity .2s, transform .05s ease;
      opacity:.9;
    }
    .copy-btn:hover{ opacity:1; }
    .copy-btn:active{ transform:scale(.98); }
    .code-label{
      position:absolute; left:12px; top:8px; font-size:11px; color:#a8b3c6; letter-spacing:.3px;
      background:rgba(255,255,255,.06); padding:3px 8px; border-radius:7px; border:1px solid rgba(255,255,255,.1);
    }

    /* ---------- Footer ---------- */
    footer{
      border-top:1px solid #e9eef3; background:#fff;
    }
    .footer-inner{
      max-width:var(--maxw); margin:0 auto; padding:22px 20px; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:10px;
      color:var(--gray-600);
    }
    .brand{
      font-weight:700; letter-spacing:.6px; color:var(--gray-700);
    }
    .brand .mark{ color:var(--teal); }
    .pub{ font-size:14px; color:#475867; }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header" role="banner">
    <div class="header-container">
      <a class="logo" href="/SideNote/" aria-label="SideNote ãƒˆãƒƒãƒ—ã¸">
        <span class="logo-smart">Side</span><span class="logo-side">Note</span>
      </a>
      <nav class="main-nav" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" aria-labelledby="hero-title">
    <div class="hero-inner">
      <div>
        <span class="hero-badge" aria-hidden="true">ğŸ” é™çš„ã‚µã‚¤ãƒˆ Ã— æ¤œç´¢</span>
        <h1 id="hero-title">25.8.16 é™çš„ã‚µã‚¤ãƒˆã§å°å…¥ã™ã‚‹ã‚µã‚¤ãƒˆå†…æ¤œç´¢ï¼šLunr.jsï¼ˆè‡ªåŠ›ï¼‰ã¨Algoliaï¼ˆå¤–éƒ¨ï¼‰ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³è§£èª¬ ğŸ” | SideNote</h1>
        <p>é™çš„ã‚µã‚¤ãƒˆã§ã‚‚å®Ÿç¾ã§ãã‚‹æ¤œç´¢æ©Ÿèƒ½ã‚’ã€<strong>Lunr.js</strong> ã¨ <strong>Algolia</strong> ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ã€‚</p>
      </div>
      <div class="hero-card" aria-label="ã“ã®è¨˜äº‹ã®è¦ç‚¹">
        <p><span class="dot"></span>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ãªã—ã§å®Œçµï¼šLunr.jsï¼ˆå°ã€œä¸­è¦æ¨¡å‘ã‘ï¼‰</p>
        <p><span class="dot"></span>ä½“é¨“é‡è¦–ï¼†æ‹¡å¼µæ€§ï¼šAlgoliaï¼ˆå¤§è¦æ¨¡ãƒ»é«˜åº¦æ©Ÿèƒ½ï¼‰</p>
        <p><span class="dot"></span>å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—ï¼ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ä»˜ã</p>
      </div>
    </div>
  </section>

  <main role="main" class="wrap">
    <!-- TOC -->
    <aside class="toc" aria-label="ç›®æ¬¡">
      <h3>ç›®æ¬¡</h3>
      <nav id="toc-nav"></nav>
    </aside>

    <!-- Article -->
    <article aria-labelledby="article-title">
      <div class="article-head">
        <div class="meta">
          <span class="pill">Search Guide</span>
          <span>å…¬é–‹æ—¥ï¼š</span>
        </div>
      </div>
      <div class="article-body" id="article">
        <h2 id="intro">é™çš„ã‚µã‚¤ãƒˆã§å°å…¥ã™ã‚‹ã‚µã‚¤ãƒˆå†…æ¤œç´¢ï¼šLunr.jsï¼ˆè‡ªåŠ›ï¼‰ã¨Algoliaï¼ˆå¤–éƒ¨ï¼‰ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³è§£èª¬ ğŸ”</h2>
        <p>é™çš„ã‚µã‚¤ãƒˆã§ã‚‚ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é‡ãŒå¢—ãˆã‚‹ã¨ã€Œæ¢ã—ã‚„ã™ã•ã€ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ã€<strong>å¤–éƒ¨ã«ä¾å­˜ã—ãªã„ Lunr.js</strong> ã¨ã€<strong>é«˜æ©Ÿèƒ½ãªå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ Algolia</strong> ã®2é€šã‚Šã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p>

        <h2 id="method-a">æ–¹æ³•Aï¼šLunr.js ã‚’ä½¿ã†ï¼ˆè‡ªåŠ›ã§å®Œçµã•ã›ã‚‹æ–¹æ³•ï¼‰ ğŸ§°</h2>
        <p>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã«é ¼ã‚‰ãšã€ç„¡æ–™ã§ã‚µã‚¤ãƒˆå†…æ¤œç´¢ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã§ã™ã€‚ã‚µã‚¤ãƒˆã®å…¨ãƒšãƒ¼ã‚¸ã®æƒ…å ±ã‚’ã¾ã¨ã‚ãŸ JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ãã‚Œã‚’ä½¿ã£ã¦æ¤œç´¢ã—ã¾ã™ã€‚</p>

        <h3 id="step1">ã‚¹ãƒ†ãƒƒãƒ—1ï¼šæ¤œç´¢ãƒ‡ãƒ¼ã‚¿ <code>search-index.json</code> ã‚’ä½œæˆã™ã‚‹</h3>
        <p>ã‚µã‚¤ãƒˆå†…ã®æ¤œç´¢å¯¾è±¡ã«ã—ãŸã„ãƒšãƒ¼ã‚¸ã®æƒ…å ±ã‚’ã¾ã¨ã‚ãŸ JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚æ‰‹å‹•ã§ã‚‚ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚‚OKã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ¤œç´¢ã®æ ¸ã«ãªã‚Šã¾ã™ã€‚</p>

        <p><strong>search-index.json ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆä¾‹ï¼‰</strong></p>
        <pre aria-label="search-index.json ã®ä¾‹"><span class="code-label">JSON</span><button class="copy-btn" data-copy>Copy</button><code>[
{
  "id": 0,
  "url": "/about.html",
  "title": "ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦",
  "content": "ã“ã®ã‚µã‚¤ãƒˆã®é‹å–¶æ–¹é‡ã‚„ç›®çš„ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã¾ã™..."
},
{
  "id": 1,
  "url": "/products/item01.html",
  "title": "è£½å“Aã®ç´¹ä»‹",
  "content": "ä¸»åŠ›è£½å“ã§ã‚ã‚‹è£½å“Aã®æ©Ÿèƒ½ã‚„ç‰¹å¾´ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™..."
}
]</code></pre>
        <ul>
          <li><strong>id</strong> ã¯ 0 ã‹ã‚‰é–‹å§‹ã™ã‚‹é€£ç•ª</li>
          <li><strong>url</strong> ã¯ãƒšãƒ¼ã‚¸ãƒ‘ã‚¹</li>
          <li><strong>title / content</strong> ã¯æ¤œç´¢ã«ãƒ’ãƒƒãƒˆã•ã›ãŸã„è¦ç´„</li>
        </ul>

        <h3 id="step2">ã‚¹ãƒ†ãƒƒãƒ—2ï¼šHTMLã«æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã¨çµæœã‚¨ãƒªã‚¢ã‚’è¨­ç½®ã™ã‚‹</h3>
        <p>æœ€ä½é™ã®ä¾‹ï¼š</p>
        <pre aria-label="æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã®HTMLä¾‹"><span class="code-label">HTML</span><button class="copy-btn" data-copy>Copy</button><code>&lt;form role="search" aria-label="ã‚µã‚¤ãƒˆå†…æ¤œç´¢"&gt;
  &lt;label for="search-input"&gt;ã‚µã‚¤ãƒˆå†…ã‚’æ¤œç´¢ï¼ˆ2æ–‡å­—ä»¥ä¸Šï¼‰ğŸ”&lt;/label&gt;
  &lt;input id="search-input" name="q" type="search" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›" /&gt;
  &lt;ul id="results-container" aria-live="polite"&gt;&lt;/ul&gt;
&lt;/form&gt;</code></pre>

        <h3 id="step3">ã‚¹ãƒ†ãƒƒãƒ—3ï¼šJavaScriptã‚’è¨˜è¿°ã™ã‚‹ï¼ˆLunr.jsã‚’ä½¿ç”¨ï¼‰</h3>
        <p>ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ Lunr.js ã‚’ä½¿ã£ãŸæœ€å°æ§‹æˆã§ã™ï¼ˆ<code>&lt;script src="..."&gt;</code> ã§æœ¬ä½“èª­è¾¼ãŒå¿…è¦ï¼‰ã€‚</p>
        <pre aria-label="Lunr.js ã‚’ä½¿ã£ãŸæ¤œç´¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹"><span class="code-label">JS</span><button class="copy-btn" data-copy>Copy</button><code>&lt;script src="https://unpkg.com/lunr/lunr.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
(async function() {
  const searchInput = document.getElementById('search-input');
  const resultsContainer = document.getElementById('results-container');
  const response = await fetch('/search-index.json');
  const documents = await response.json();

  const idx = lunr(function () {
    this.ref('id');
    this.field('title');
    this.field('content');
    documents.forEach(function (doc) { this.add(doc); }, this);
  });

  searchInput.addEventListener('input', function (event) {
    const query = event.target.value;
    resultsContainer.innerHTML = '';
    if (query.length &lt; 2) return;

    const results = idx.search(query);
    if (results.length &gt; 0) {
      results.forEach(function (result) {
        const item = documents.find(doc =&gt; doc.id == result.ref);
        const li = document.createElement('li');
        li.innerHTML = '&lt;a href="' + item.url + '"&gt;' + item.title + '&lt;/a&gt;';
        resultsContainer.appendChild(li);
      });
    } else {
      const noResult = document.createElement('li');
      noResult.textContent = 'è©²å½“ã™ã‚‹ãƒšãƒ¼ã‚¸ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚';
      resultsContainer.appendChild(noResult);
    }
  });
})();
&lt;/script&gt;</code></pre>
        <p>ã“ã®æ–¹æ³•ã¯ãƒšãƒ¼ã‚¸æ•°ãŒæ•°åã€œç™¾ãƒšãƒ¼ã‚¸ç¨‹åº¦ã§ã‚ã‚Œã°ååˆ†ã«å®Ÿç”¨çš„ã§ã™ã€‚</p>

        <h2 id="method-b">æ–¹æ³•Bï¼šAlgolia ã‚’ä½¿ã†ï¼ˆé«˜æ©Ÿèƒ½ãªå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ â˜ï¸</h2>
        <p>é«˜æ€§èƒ½ãªå¤–éƒ¨æ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€ãƒ•ã‚¡ã‚»ãƒƒãƒˆæ¤œç´¢ãªã©é«˜åº¦ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚è¦æ¨¡ãŒå¤§ãã„ã‚µã‚¤ãƒˆã‚„æ¤œç´¢ä½“é¨“ã‚’é‡è¦–ã™ã‚‹å ´åˆã«æœ‰åˆ©ã§ã™ã€‚</p>

        <h3 id="benefits">Algolia ã®ãƒ¡ãƒªãƒƒãƒˆ</h3>
        <ul>
          <li>é«˜é€Ÿã§ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªæ¤œç´¢</li>
          <li>ãƒ©ãƒ³ã‚­ãƒ³ã‚° / ãƒ•ã‚¡ã‚»ãƒƒãƒˆ / ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ãªã©ã®é«˜åº¦æ©Ÿèƒ½</li>
          <li>ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é¢ã®åˆ©ä¾¿æ€§</li>
        </ul>

        <h3 id="caveats">Algolia ã®æ³¨æ„ç‚¹</h3>
        <ul>
          <li>åˆ©ç”¨æ–™é‡‘ãŒç™ºç”Ÿï¼ˆç„¡æ–™æ ã¯ã‚ã‚‹ãŒåˆ¶é™ã‚ã‚Šï¼‰</li>
          <li>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¸ã®ä¾å­˜</li>
        </ul>

        <h2 id="summary">ã¾ã¨ã‚ âœ…</h2>
        <blockquote>
          å°ã€œä¸­è¦æ¨¡ã®é™çš„ã‚µã‚¤ãƒˆã§ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆè‡ªå‰ã§å®Œçµã•ã›ãŸã„ãªã‚‰ <strong>Lunr.js</strong>ã€‚<br />
          æ¤œç´¢ä½“é¨“ãƒ»æ€§èƒ½ãƒ»é‹ç”¨æ€§ã‚’é‡è¦–ã™ã‚‹ãªã‚‰ <strong>Algolia</strong> ã‚’æ¤œè¨ã€‚
        </blockquote>
      </div>
    </article>
  </main>

  <!-- Footer -->
  <footer role="contentinfo">
    <div class="footer-inner">
      <div class="brand" aria-label="ã‚µã‚¤ãƒˆãƒ­ã‚´">Ya<span class="mark">Mac</span>33</div>
      </div>
  </footer>

  <!-- Page JS (vanilla) -->
  <script>
    // 1) Publish date: set proper datetime="YYYY-MM-DD" from visible "YYYY/MM/DD"
    (function(){
      function setDatetime(el){
        if(!el) return;
        var text = (el.textContent || '').trim();
        if(!text) return;
        var iso = text.replace(/\//g,'-');
        el.setAttribute('datetime', iso);
      }
      setDatetime(document.getElementById('published'));
      setDatetime(document.getElementById('published-footer'));
    })();

    // 2) Build TOC from h2/h3
    (function(){
      var container = document.getElementById('toc-nav');
      if(!container) return;
      var headings = document.querySelectorAll('.article-body h2, .article-body h3');
      if(!headings.length) return;
      var frag = document.createDocumentFragment();
      headings.forEach(function(h){
        if(!h.id){
          h.id = h.textContent.trim().toLowerCase().replace(/\s+/g,'-').replace(/[^\w\-]/g,'');
        }
        var a = document.createElement('a');
        a.href = '#'+h.id;
        a.textContent = h.textContent;
        if(h.tagName.toLowerCase()==='h3'){ a.style.paddingLeft='16px'; }
        frag.appendChild(a);
      });
      container.appendChild(frag);
    })();

    // 3) Copy buttons for code blocks
    (function(){
      var pres = document.querySelectorAll('pre');
      pres.forEach(function(pre){
        var btn = pre.querySelector('.copy-btn');
        var code = pre.querySelector('code');
        if(btn && code){
          btn.addEventListener('click', async function(){
            try{
              await navigator.clipboard.writeText(code.textContent);
              var original = btn.textContent;
              btn.textContent = 'Copied!';
              btn.disabled = true;
              setTimeout(function(){ btn.textContent = original; btn.disabled = false; }, 1400);
            }catch(e){
              alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ');
            }
          });
        }
      });
    })();
  </script>
</body>
</html>
