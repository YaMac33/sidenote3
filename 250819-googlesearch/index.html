<!DOCTYPE html>


<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>25.08.19 Googleカスタム検索（Programmable Search Engine）でサイト内検索を実装する | SideNote</title>
  <meta name="description" content="Googleカスタム検索（Programmable Search Engine / 旧CSE）を使って、自分のブログや特定サイトだけを対象にした検索ボックスを設置する方法を、導入手順・表示方法・カスタマイズ・注意点までシンプルに解説します。">
  <style>
    :root{
      --bg:#ffffff;
      --text:#333333;
      --muted:#666666;
      --accent:#0d6efd;
      --code-bg:#212529;
      --code-border:#2a2f35;
      --header-bg:#ffffff;
      --toc-bg:#ffffff;
      --shadow:0 6px 20px rgba(0,0,0,.08);
      --radius:12px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";line-height:1.7}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    /* Header */
    header.site-header{
      position:fixed;top:0;left:0;right:0;background:var(--header-bg);z-index:1000;
      border-bottom:1px solid #eee;
      backdrop-filter:saturate(180%) blur(8px);
    }
    .header-inner{
      max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;
      padding:14px 20px;
    }
    .logo a{display:inline-block;font-weight:800;font-size:20px;letter-spacing:.2px}
    .logo .side{color:#008080}
    .logo .note{color:#666666}
    /* Layout */
    .wrap{
      max-width:1200px;margin:0 auto;display:grid;grid-template-columns: 1fr 280px;gap:40px;padding:32px 20px
    }
    main{padding-top:84px}
    article.post{max-width:800px;margin:0 auto}
    /* Typography */
    h1{font-size:clamp(24px,2.4vw,34px);line-height:1.25;margin:12px 0 18px;font-weight:800}
    h2{font-size:clamp(20px,2vw,26px);margin:40px 0 14px;padding-top:8px;border-top:1px solid #eee}
    h3{font-size:clamp(17px,1.6vw,20px);margin:24px 0 10px}
    p{margin:12px 0}
    ul,ol{padding-left:1.3em;margin:10px 0}
    li{margin:.35em 0}
    blockquote{
      margin:18px 0;padding:12px 16px;border-left:4px solid var(--accent);background:#f8f9fb;border-radius:6px
    }
    /* Code block (dark theme) */
    pre{
      margin:16px 0;background:var(--code-bg);color:#e9ecef;border:1px solid var(--code-border);
      border-radius:10px;overflow:auto;position:relative;padding:14px 16px 16px;box-shadow:var(--shadow)
    }
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;font-size:.92em}
    pre code{display:block;white-space:pre}
    /* Fake syntax highlight */
    .tok-kw{color:#c792ea}
    .tok-str{color:#ecc48d}
    .tok-tag{color:#82aaff}
    .tok-attr{color:#addb67}
    .tok-cmt{color:#7f8c98;font-style:italic}
    /* Copy button */
    .copy-btn{
      position:absolute;top:8px;right:8px;border:1px solid #3a3f44;background:#2b3036;color:#e9ecef;
      border-radius:8px;font-size:12px;padding:6px 10px;cursor:pointer;opacity:.9
    }
    .copy-btn:hover{opacity:1}
    .copy-btn.done{background:#1f8b4c;border-color:#1f8b4c}
    /* Inline code */
    p code, li code{background:#f3f5f7;border:1px solid #e6e8eb;padding:.1em .35em;border-radius:6px}
    /* TOC */
    aside.toc{
      position:sticky;top:92px;align-self:start;height:max-content;background:var(--toc-bg);
      border:1px solid #eee;border-radius:12px;padding:14px 12px;box-shadow:var(--shadow)
    }
    .toc h2{margin:0 0 8px;border:none;font-size:14px;color:#111;font-weight:700}
    .toc nav{max-height:70vh;overflow:auto}
    .toc a{
      display:block;padding:8px 10px;border-radius:8px;color:#333;text-decoration:none;font-size:14px
    }
    .toc a:hover{background:#f5f7fb}
    .toc a.active{background:rgba(13,110,253,.12);color:#0d6efd;font-weight:700}
    .meta{
      color:#777;font-size:14px;margin-top:6px
    }
    /* Footer */
    footer{
      border-top:1px solid #eee;margin-top:44px
    }
    .footer-inner{
      max-width:1200px;margin:0 auto;padding:22px 20px;color:#555;font-size:14px;display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap
    }
    /* Cards / helpers */
    .callout{display:flex;gap:.6em;align-items:flex-start;background:#f8f9fb;border:1px solid #e9ecef;border-radius:10px;padding:10px 12px}
    /* Responsive */
    @media (max-width: 1023px){
      .wrap{grid-template-columns:1fr;gap:0}
      aside.toc{display:none}
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="header-inner" role="banner" aria-label="サイトヘッダー">
      <div class="logo">
        <a href="/SideNote/" aria-label="SideNote トップへ">
          <span class="side">Side</span><span class="note">Note</span>
        </a>
      </div>
    </div>
  </header>


  <main>
    <div class="wrap">
      <article class="post" aria-labelledby="post-title">
        <header>
          <h1 id="post-title">25.08.18 Googleカスタム検索（Programmable Search Engine）でサイト内検索を実装する</h1>
          <p class="meta">自分のサイトだけを対象にした検索ボックスを、無料でサクッと設置する方法。</p>
        </header>


    <section>
      <p>「Google カスタム検索（Google Custom Search Engine / 現 <strong>Programmable Search Engine</strong>）」を使うと、<strong>自分のブログや特定サイト内だけを検索対象</strong>にした Google 検索ボックスを設置できます。無料で使えて、Google と同等の検索精度を活用できるのが強みです。</p>
      <blockquote>
        以前は “Custom Search Engine (CSE)” という名称でしたが、現在は “Programmable Search Engine” に統一されています。
      </blockquote>
    </section>

    <h2 id="features">✅ できること（Googleカスタム検索）</h2>
    <ul>
      <li>自分のブログ内の記事だけを検索対象にできる</li>
      <li>Google の自然言語検索と同じ精度で検索可能</li>
      <li>サイトに <strong>検索ボックスを埋め込める</strong></li>
      <li>外観のカスタマイズや広告の表示/非表示の設定が可能（無料版は広告あり）</li>
    </ul>

    <h2 id="setup">🛠️ 導入手順（基本編）</h2>
    <h3 id="step1">① Google カスタム検索のページへアクセス</h3>
    <p><a href="https://programmablesearchengine.google.com/" target="_blank" rel="noopener">Programmable Search Engine</a> にアクセスします。</p>

    <h3 id="step2">② 新しい検索エンジンを作成</h3>
    <ol>
      <li>右上の「新しい検索エンジンを作成」をクリック</li>
      <li><strong>検索対象のサイトの URL</strong> を入力（例：<code>https://example.com/</code>）</li>
      <li>検索エンジン名（任意）を入力</li>
      <li>作成をクリック</li>
    </ol>

    <h3 id="step3">③ 「コードを取得」して貼り付け</h3>
    <p>作成完了画面の「コードを取得」から、次のスニペットをコピーしてページに貼り付けます。</p>
    <pre><button class="copy-btn" aria-label="コードをコピー">Copy</button><code>&lt;script async src=&quot;https://cse.google.com/cse.js?cx=YOUR_SEARCH_ENGINE_ID&quot;&gt;&lt;/script&gt;

<div class="gcse-search"></div>

    <h2 id="display">🔍 検索結果の表示方法（2パターン）</h2>
    <ol>
      <li><strong>同一ページに埋め込み</strong>（デフォルト）: 検索ボックスと結果を同じページに表示</li>
      <li><strong>別ページで表示</strong>: 設定でリダイレクト先を指定して結果を別ページに表示</li>
    </ol>

    <h2 id="customize">⚙️ カスタマイズ設定（管理画面）</h2>
    <ul>
      <li><strong>検索対象</strong>の追加/削除（複数ドメイン可）</li>
      <li><strong>外観（色・フォント）</strong>の調整</li>
      <li><strong>広告</strong>の表示設定（無料版は広告あり / 非表示は有料）</li>
      <li><strong>SafeSearch</strong> などのフィルター</li>
      <li><strong>特定キーワードの優先表示</strong>（プロモーション）</li>
    </ul>

    <h2 id="pricing">💰 有料版との違い（ざっくり）</h2>
    <table aria-label="無料版と有料版の比較" style="width:100%;border-collapse:collapse;border:1px solid #e9ecef;border-radius:10px;overflow:hidden">
      <thead>
        <tr style="background:#f8f9fb">
          <th style="text-align:left;padding:10px;border-bottom:1px solid #e9ecef">機能</th>
          <th style="text-align:left;padding:10px;border-bottom:1px solid #e9ecef">無料版</th>
          <th style="text-align:left;padding:10px;border-bottom:1px solid #e9ecef">有料（GCP版）</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="padding:10px;border-top:1px solid #f1f3f5">広告表示</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">あり</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">非表示可</td>
        </tr>
        <tr>
          <td style="padding:10px;border-top:1px solid #f1f3f5">ブランド表示</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">除去不可</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">柔軟にカスタム</td>
        </tr>
        <tr>
          <td style="padding:10px;border-top:1px solid #f1f3f5">JSON API</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">制限あり</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">上限拡大可能</td>
        </tr>
      </tbody>
    </table>

    <h2 id="proscons">✅ 強みと弱み</h2>
    <h3>強み（無料でこの性能は優秀）</h3>
    <ul>
      <li>Google と同等の検索精度</li>
      <li>導入が簡単で環境を選ばない（静的サイトでもOK）</li>
      <li>管理画面から対象と外観を調整可能</li>
    </ul>
    <h3>弱み（用途によっては注意）</h3>
    <ul>
      <li>無料版は広告が表示される</li>
      <li>デザイン自由度はやや限定的</li>
      <li>Google にインデックスされたページのみ検索対象（最新記事は反映に時間差）</li>
    </ul>

    <h2 id="who">🎯 向いているブログ運営者</h2>
    <ul>
      <li>自分のブログ記事を横断検索させたい</li>
      <li>無料で手軽に始めたい</li>
      <li>SEO をきちんと行いインデックスが進んでいる</li>
    </ul>

    <h2 id="example">📦 具体例：HTML への埋め込みコード例</h2>
    <pre><button class="copy-btn" aria-label="コードをコピー">Copy</button><code>&lt;!-- Google カスタム検索 --&gt;

<script async src="https://cse.google.com/cse.js?cx=abcdefg123456:xyz7890"></script>
<div class="gcse-search"></div>

    <h2 id="notes">☝️ 注意点</h2>
    <ul>
      <li>インデックスされていないページは検索結果に出ない（新規投稿は時間差あり）</li>
      <li>ドメインや URL 構造を変えたら設定も要調整</li>
      <li><code>robots.txt</code> でクロール拒否していると検索対象外</li>
    </ul>

    <hr style="border:none;border-top:1px solid #eee;margin:32px 0">
    <div class="callout" role="note" aria-label="まとめ">
      <div>📝</div>
      <div><strong>まとめ:</strong> まずは無料版で導入→使い勝手と広告の許容度を確認。必要に応じてデザイン調整や有料版を検討するとスムーズです。</div>
    </div>
  </article>

  <aside class="toc" aria-label="目次">
    <h2>目次</h2>
    <nav id="toc-nav">
      <!-- populated by JS -->
    </nav>
  </aside>
</div>

  </main>


  <footer role="contentinfo">
    <div class="footer-inner">
      <div>© 2025 YaMac33</div>
      <div>公開日: <time datetime="2025-08-18">2025/08/18</time></div>
    </div>
  </footer>


  <script>
    // ===== Generate TOC from h2 =====
    (function(){
      const article = document.querySelector('article.post');
      const headings = article.querySelectorAll('h2[id]');
      const nav = document.getElementById('toc-nav');
      if(!nav || !headings.length) return;
      const ul = document.createElement('ul');
      ul.style.listStyle='none';ul.style.margin='0';ul.style.padding='0';
      headings.forEach(h=>{
        const li=document.createElement('li');
        const a=document.createElement('a');
        a.href='#'+h.id; a.textContent=h.textContent;
        li.appendChild(a); ul.appendChild(li);
      });
      nav.appendChild(ul);

      // Smooth scroll
      nav.addEventListener('click', (e)=>{
        if(e.target.tagName.toLowerCase()==='a'){
          e.preventDefault();
          const id = e.target.getAttribute('href').slice(1);
          const target = document.getElementById(id);
          if(target){
            const y = target.getBoundingClientRect().top + window.pageYOffset - 80;
            window.scrollTo({top:y,behavior:'smooth'});
          }
        }
      });

      // Scroll spy
      const links = nav.querySelectorAll('a');
      const map = new Map();
      links.forEach(a=>{
        const id=a.getAttribute('href').slice(1);
        const el=document.getElementById(id);
        if(el) map.set(el,a);
      });
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          const a = map.get(entry.target);
          if(!a) return;
          if(entry.isIntersecting){
            links.forEach(l=>l.classList.remove('active'));
            a.classList.add('active');
          }
        });
      },{rootMargin:'-40% 0px -55% 0px',threshold:[0,1]});
      map.forEach((_,el)=>io.observe(el));
    })();

    // ===== Code block copy buttons =====
    (function(){
      function copyText(text){
        if(navigator.clipboard && window.isSecureContext){
          return navigator.clipboard.writeText(text);
        }else{
          const ta=document.createElement('textarea');
          ta.value=text; ta.style.position='fixed'; ta.style.top='-1000px';
          document.body.appendChild(ta); ta.focus(); ta.select();
          try{document.execCommand('copy');}finally{document.body.removeChild(ta);}
          return Promise.resolve();
        }
      }
      document.querySelectorAll('pre').forEach(pre=>{
        const btn = pre.querySelector('.copy-btn');
        const code = pre.querySelector('code');
        if(!btn || !code) return;
        btn.addEventListener('click', async ()=>{
          const raw = code.textContent.replace(/\u00A0/g,' ');
          try{
            await copyText(raw);
            btn.textContent='Copied';
            btn.classList.add('done');
            setTimeout(()=>{btn.textContent='Copy';btn.classList.remove('done');},1400);
          }catch(e){
            btn.textContent='Error';
          }
        });
      });
    })();

    // ===== Enhance code with light syntax tint (very light, no parser) =====
    (function(){
      document.querySelectorAll('pre code').forEach(code=>{
        if(code.dataset.tinted) return;
        let html = code.innerHTML;
        // very naive HTML-ish tint
        html = html
          .replace(/&lt;!--[\s\S]*?--&gt;/g, m=>'<span class="tok-cmt">'+m+'</span>')
          .replace(/(&lt;\/?)([a-zA-Z0-9-]+)(\s|&gt;)/g, (_,a,tag,c)=> a+'<span class="tok-tag">'+tag+'</span>'+c)
          .replace(/([a-zA-Z-:]+)=(&quot;[^&]*&quot;)/g, (_,attr,val)=>'<span class="tok-attr">'+attr+'</span>='+ '<span class="tok-str">'+val+'</span>');
        code.innerHTML = html;
        code.dataset.tinted = "1";
      });
    })();
  </script>


</body>
</html>

