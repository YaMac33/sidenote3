<!DOCTYPE html>


<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>25.08.19 Googleã‚«ã‚¹ã‚¿ãƒ æ¤œç´¢ï¼ˆProgrammable Search Engineï¼‰ã§ã‚µã‚¤ãƒˆå†…æ¤œç´¢ã‚’å®Ÿè£…ã™ã‚‹ | SideNote</title>
  <meta name="description" content="Googleã‚«ã‚¹ã‚¿ãƒ æ¤œç´¢ï¼ˆProgrammable Search Engine / æ—§CSEï¼‰ã‚’ä½¿ã£ã¦ã€è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°ã‚„ç‰¹å®šã‚µã‚¤ãƒˆã ã‘ã‚’å¯¾è±¡ã«ã—ãŸæ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã‚’è¨­ç½®ã™ã‚‹æ–¹æ³•ã‚’ã€å°å…¥æ‰‹é †ãƒ»è¡¨ç¤ºæ–¹æ³•ãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒ»æ³¨æ„ç‚¹ã¾ã§ã‚·ãƒ³ãƒ—ãƒ«ã«è§£èª¬ã—ã¾ã™ã€‚">
  <style>
    :root{
      --bg:#ffffff;
      --text:#333333;
      --muted:#666666;
      --accent:#0d6efd;
      --code-bg:#212529;
      --code-border:#2a2f35;
      --header-bg:#ffffff;
      --toc-bg:#ffffff;
      --shadow:0 6px 20px rgba(0,0,0,.08);
      --radius:12px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";line-height:1.7}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    /* Header */
    header.site-header{
      position:fixed;top:0;left:0;right:0;background:var(--header-bg);z-index:1000;
      border-bottom:1px solid #eee;
      backdrop-filter:saturate(180%) blur(8px);
    }
    .header-inner{
      max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;
      padding:14px 20px;
    }
    .logo a{display:inline-block;font-weight:800;font-size:20px;letter-spacing:.2px}
    .logo .side{color:#008080}
    .logo .note{color:#666666}
    /* Layout */
    .wrap{
      max-width:1200px;margin:0 auto;display:grid;grid-template-columns: 1fr 280px;gap:40px;padding:32px 20px
    }
    main{padding-top:84px}
    article.post{max-width:800px;margin:0 auto}
    /* Typography */
    h1{font-size:clamp(24px,2.4vw,34px);line-height:1.25;margin:12px 0 18px;font-weight:800}
    h2{font-size:clamp(20px,2vw,26px);margin:40px 0 14px;padding-top:8px;border-top:1px solid #eee}
    h3{font-size:clamp(17px,1.6vw,20px);margin:24px 0 10px}
    p{margin:12px 0}
    ul,ol{padding-left:1.3em;margin:10px 0}
    li{margin:.35em 0}
    blockquote{
      margin:18px 0;padding:12px 16px;border-left:4px solid var(--accent);background:#f8f9fb;border-radius:6px
    }
    /* Code block (dark theme) */
    pre{
      margin:16px 0;background:var(--code-bg);color:#e9ecef;border:1px solid var(--code-border);
      border-radius:10px;overflow:auto;position:relative;padding:14px 16px 16px;box-shadow:var(--shadow)
    }
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;font-size:.92em}
    pre code{display:block;white-space:pre}
    /* Fake syntax highlight */
    .tok-kw{color:#c792ea}
    .tok-str{color:#ecc48d}
    .tok-tag{color:#82aaff}
    .tok-attr{color:#addb67}
    .tok-cmt{color:#7f8c98;font-style:italic}
    /* Copy button */
    .copy-btn{
      position:absolute;top:8px;right:8px;border:1px solid #3a3f44;background:#2b3036;color:#e9ecef;
      border-radius:8px;font-size:12px;padding:6px 10px;cursor:pointer;opacity:.9
    }
    .copy-btn:hover{opacity:1}
    .copy-btn.done{background:#1f8b4c;border-color:#1f8b4c}
    /* Inline code */
    p code, li code{background:#f3f5f7;border:1px solid #e6e8eb;padding:.1em .35em;border-radius:6px}
    /* TOC */
    aside.toc{
      position:sticky;top:92px;align-self:start;height:max-content;background:var(--toc-bg);
      border:1px solid #eee;border-radius:12px;padding:14px 12px;box-shadow:var(--shadow)
    }
    .toc h2{margin:0 0 8px;border:none;font-size:14px;color:#111;font-weight:700}
    .toc nav{max-height:70vh;overflow:auto}
    .toc a{
      display:block;padding:8px 10px;border-radius:8px;color:#333;text-decoration:none;font-size:14px
    }
    .toc a:hover{background:#f5f7fb}
    .toc a.active{background:rgba(13,110,253,.12);color:#0d6efd;font-weight:700}
    .meta{
      color:#777;font-size:14px;margin-top:6px
    }
    /* Footer */
    footer{
      border-top:1px solid #eee;margin-top:44px
    }
    .footer-inner{
      max-width:1200px;margin:0 auto;padding:22px 20px;color:#555;font-size:14px;display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap
    }
    /* Cards / helpers */
    .callout{display:flex;gap:.6em;align-items:flex-start;background:#f8f9fb;border:1px solid #e9ecef;border-radius:10px;padding:10px 12px}
    /* Responsive */
    @media (max-width: 1023px){
      .wrap{grid-template-columns:1fr;gap:0}
      aside.toc{display:none}
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="header-inner" role="banner" aria-label="ã‚µã‚¤ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼">
      <div class="logo">
        <a href="/SideNote/" aria-label="SideNote ãƒˆãƒƒãƒ—ã¸">
          <span class="side">Side</span><span class="note">Note</span>
        </a>
      </div>
    </div>
  </header>


  <main>
    <div class="wrap">
      <article class="post" aria-labelledby="post-title">
        <header>
          <h1 id="post-title">25.08.18 Googleã‚«ã‚¹ã‚¿ãƒ æ¤œç´¢ï¼ˆProgrammable Search Engineï¼‰ã§ã‚µã‚¤ãƒˆå†…æ¤œç´¢ã‚’å®Ÿè£…ã™ã‚‹</h1>
          <p class="meta">è‡ªåˆ†ã®ã‚µã‚¤ãƒˆã ã‘ã‚’å¯¾è±¡ã«ã—ãŸæ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã‚’ã€ç„¡æ–™ã§ã‚µã‚¯ãƒƒã¨è¨­ç½®ã™ã‚‹æ–¹æ³•ã€‚</p>
        </header>


    <section>
      <p>ã€ŒGoogle ã‚«ã‚¹ã‚¿ãƒ æ¤œç´¢ï¼ˆGoogle Custom Search Engine / ç¾ <strong>Programmable Search Engine</strong>ï¼‰ã€ã‚’ä½¿ã†ã¨ã€<strong>è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°ã‚„ç‰¹å®šã‚µã‚¤ãƒˆå†…ã ã‘ã‚’æ¤œç´¢å¯¾è±¡</strong>ã«ã—ãŸ Google æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã‚’è¨­ç½®ã§ãã¾ã™ã€‚ç„¡æ–™ã§ä½¿ãˆã¦ã€Google ã¨åŒç­‰ã®æ¤œç´¢ç²¾åº¦ã‚’æ´»ç”¨ã§ãã‚‹ã®ãŒå¼·ã¿ã§ã™ã€‚</p>
      <blockquote>
        ä»¥å‰ã¯ â€œCustom Search Engine (CSE)â€ ã¨ã„ã†åç§°ã§ã—ãŸãŒã€ç¾åœ¨ã¯ â€œProgrammable Search Engineâ€ ã«çµ±ä¸€ã•ã‚Œã¦ã„ã¾ã™ã€‚
      </blockquote>
    </section>

    <h2 id="features">âœ… ã§ãã‚‹ã“ã¨ï¼ˆGoogleã‚«ã‚¹ã‚¿ãƒ æ¤œç´¢ï¼‰</h2>
    <ul>
      <li>è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°å†…ã®è¨˜äº‹ã ã‘ã‚’æ¤œç´¢å¯¾è±¡ã«ã§ãã‚‹</li>
      <li>Google ã®è‡ªç„¶è¨€èªæ¤œç´¢ã¨åŒã˜ç²¾åº¦ã§æ¤œç´¢å¯èƒ½</li>
      <li>ã‚µã‚¤ãƒˆã« <strong>æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã‚’åŸ‹ã‚è¾¼ã‚ã‚‹</strong></li>
      <li>å¤–è¦³ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚„åºƒå‘Šã®è¡¨ç¤º/éè¡¨ç¤ºã®è¨­å®šãŒå¯èƒ½ï¼ˆç„¡æ–™ç‰ˆã¯åºƒå‘Šã‚ã‚Šï¼‰</li>
    </ul>

    <h2 id="setup">ğŸ› ï¸ å°å…¥æ‰‹é †ï¼ˆåŸºæœ¬ç·¨ï¼‰</h2>
    <h3 id="step1">â‘  Google ã‚«ã‚¹ã‚¿ãƒ æ¤œç´¢ã®ãƒšãƒ¼ã‚¸ã¸ã‚¢ã‚¯ã‚»ã‚¹</h3>
    <p><a href="https://programmablesearchengine.google.com/" target="_blank" rel="noopener">Programmable Search Engine</a> ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</p>

    <h3 id="step2">â‘¡ æ–°ã—ã„æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½œæˆ</h3>
    <ol>
      <li>å³ä¸Šã®ã€Œæ–°ã—ã„æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
      <li><strong>æ¤œç´¢å¯¾è±¡ã®ã‚µã‚¤ãƒˆã® URL</strong> ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼š<code>https://example.com/</code>ï¼‰</li>
      <li>æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³åï¼ˆä»»æ„ï¼‰ã‚’å…¥åŠ›</li>
      <li>ä½œæˆã‚’ã‚¯ãƒªãƒƒã‚¯</li>
    </ol>

    <h3 id="step3">â‘¢ ã€Œã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã€ã—ã¦è²¼ã‚Šä»˜ã‘</h3>
    <p>ä½œæˆå®Œäº†ç”»é¢ã®ã€Œã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã€ã‹ã‚‰ã€æ¬¡ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãƒšãƒ¼ã‚¸ã«è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚</p>
    <pre><button class="copy-btn" aria-label="ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼">Copy</button><code>&lt;script async src=&quot;https://cse.google.com/cse.js?cx=YOUR_SEARCH_ENGINE_ID&quot;&gt;&lt;/script&gt;

<div class="gcse-search"></div>

    <h2 id="display">ğŸ” æ¤œç´¢çµæœã®è¡¨ç¤ºæ–¹æ³•ï¼ˆ2ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰</h2>
    <ol>
      <li><strong>åŒä¸€ãƒšãƒ¼ã‚¸ã«åŸ‹ã‚è¾¼ã¿</strong>ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰: æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã¨çµæœã‚’åŒã˜ãƒšãƒ¼ã‚¸ã«è¡¨ç¤º</li>
      <li><strong>åˆ¥ãƒšãƒ¼ã‚¸ã§è¡¨ç¤º</strong>: è¨­å®šã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆã‚’æŒ‡å®šã—ã¦çµæœã‚’åˆ¥ãƒšãƒ¼ã‚¸ã«è¡¨ç¤º</li>
    </ol>

    <h2 id="customize">âš™ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®šï¼ˆç®¡ç†ç”»é¢ï¼‰</h2>
    <ul>
      <li><strong>æ¤œç´¢å¯¾è±¡</strong>ã®è¿½åŠ /å‰Šé™¤ï¼ˆè¤‡æ•°ãƒ‰ãƒ¡ã‚¤ãƒ³å¯ï¼‰</li>
      <li><strong>å¤–è¦³ï¼ˆè‰²ãƒ»ãƒ•ã‚©ãƒ³ãƒˆï¼‰</strong>ã®èª¿æ•´</li>
      <li><strong>åºƒå‘Š</strong>ã®è¡¨ç¤ºè¨­å®šï¼ˆç„¡æ–™ç‰ˆã¯åºƒå‘Šã‚ã‚Š / éè¡¨ç¤ºã¯æœ‰æ–™ï¼‰</li>
      <li><strong>SafeSearch</strong> ãªã©ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</li>
      <li><strong>ç‰¹å®šã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å„ªå…ˆè¡¨ç¤º</strong>ï¼ˆãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰</li>
    </ul>

    <h2 id="pricing">ğŸ’° æœ‰æ–™ç‰ˆã¨ã®é•ã„ï¼ˆã–ã£ãã‚Šï¼‰</h2>
    <table aria-label="ç„¡æ–™ç‰ˆã¨æœ‰æ–™ç‰ˆã®æ¯”è¼ƒ" style="width:100%;border-collapse:collapse;border:1px solid #e9ecef;border-radius:10px;overflow:hidden">
      <thead>
        <tr style="background:#f8f9fb">
          <th style="text-align:left;padding:10px;border-bottom:1px solid #e9ecef">æ©Ÿèƒ½</th>
          <th style="text-align:left;padding:10px;border-bottom:1px solid #e9ecef">ç„¡æ–™ç‰ˆ</th>
          <th style="text-align:left;padding:10px;border-bottom:1px solid #e9ecef">æœ‰æ–™ï¼ˆGCPç‰ˆï¼‰</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="padding:10px;border-top:1px solid #f1f3f5">åºƒå‘Šè¡¨ç¤º</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">ã‚ã‚Š</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">éè¡¨ç¤ºå¯</td>
        </tr>
        <tr>
          <td style="padding:10px;border-top:1px solid #f1f3f5">ãƒ–ãƒ©ãƒ³ãƒ‰è¡¨ç¤º</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">é™¤å»ä¸å¯</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">æŸ”è»Ÿã«ã‚«ã‚¹ã‚¿ãƒ </td>
        </tr>
        <tr>
          <td style="padding:10px;border-top:1px solid #f1f3f5">JSON API</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">åˆ¶é™ã‚ã‚Š</td>
          <td style="padding:10px;border-top:1px solid #f1f3f5">ä¸Šé™æ‹¡å¤§å¯èƒ½</td>
        </tr>
      </tbody>
    </table>

    <h2 id="proscons">âœ… å¼·ã¿ã¨å¼±ã¿</h2>
    <h3>å¼·ã¿ï¼ˆç„¡æ–™ã§ã“ã®æ€§èƒ½ã¯å„ªç§€ï¼‰</h3>
    <ul>
      <li>Google ã¨åŒç­‰ã®æ¤œç´¢ç²¾åº¦</li>
      <li>å°å…¥ãŒç°¡å˜ã§ç’°å¢ƒã‚’é¸ã°ãªã„ï¼ˆé™çš„ã‚µã‚¤ãƒˆã§ã‚‚OKï¼‰</li>
      <li>ç®¡ç†ç”»é¢ã‹ã‚‰å¯¾è±¡ã¨å¤–è¦³ã‚’èª¿æ•´å¯èƒ½</li>
    </ul>
    <h3>å¼±ã¿ï¼ˆç”¨é€”ã«ã‚ˆã£ã¦ã¯æ³¨æ„ï¼‰</h3>
    <ul>
      <li>ç„¡æ–™ç‰ˆã¯åºƒå‘ŠãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
      <li>ãƒ‡ã‚¶ã‚¤ãƒ³è‡ªç”±åº¦ã¯ã‚„ã‚„é™å®šçš„</li>
      <li>Google ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã®ã¿æ¤œç´¢å¯¾è±¡ï¼ˆæœ€æ–°è¨˜äº‹ã¯åæ˜ ã«æ™‚é–“å·®ï¼‰</li>
    </ul>

    <h2 id="who">ğŸ¯ å‘ã„ã¦ã„ã‚‹ãƒ–ãƒ­ã‚°é‹å–¶è€…</h2>
    <ul>
      <li>è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’æ¨ªæ–­æ¤œç´¢ã•ã›ãŸã„</li>
      <li>ç„¡æ–™ã§æ‰‹è»½ã«å§‹ã‚ãŸã„</li>
      <li>SEO ã‚’ãã¡ã‚“ã¨è¡Œã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒé€²ã‚“ã§ã„ã‚‹</li>
    </ul>

    <h2 id="example">ğŸ“¦ å…·ä½“ä¾‹ï¼šHTML ã¸ã®åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰ä¾‹</h2>
    <pre><button class="copy-btn" aria-label="ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼">Copy</button><code>&lt;!-- Google ã‚«ã‚¹ã‚¿ãƒ æ¤œç´¢ --&gt;

<script async src="https://cse.google.com/cse.js?cx=abcdefg123456:xyz7890"></script>
<div class="gcse-search"></div>

    <h2 id="notes">â˜ï¸ æ³¨æ„ç‚¹</h2>
    <ul>
      <li>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã•ã‚Œã¦ã„ãªã„ãƒšãƒ¼ã‚¸ã¯æ¤œç´¢çµæœã«å‡ºãªã„ï¼ˆæ–°è¦æŠ•ç¨¿ã¯æ™‚é–“å·®ã‚ã‚Šï¼‰</li>
      <li>ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚„ URL æ§‹é€ ã‚’å¤‰ãˆãŸã‚‰è¨­å®šã‚‚è¦èª¿æ•´</li>
      <li><code>robots.txt</code> ã§ã‚¯ãƒ­ãƒ¼ãƒ«æ‹’å¦ã—ã¦ã„ã‚‹ã¨æ¤œç´¢å¯¾è±¡å¤–</li>
    </ul>

    <hr style="border:none;border-top:1px solid #eee;margin:32px 0">
    <div class="callout" role="note" aria-label="ã¾ã¨ã‚">
      <div>ğŸ“</div>
      <div><strong>ã¾ã¨ã‚:</strong> ã¾ãšã¯ç„¡æ–™ç‰ˆã§å°å…¥â†’ä½¿ã„å‹æ‰‹ã¨åºƒå‘Šã®è¨±å®¹åº¦ã‚’ç¢ºèªã€‚å¿…è¦ã«å¿œã˜ã¦ãƒ‡ã‚¶ã‚¤ãƒ³èª¿æ•´ã‚„æœ‰æ–™ç‰ˆã‚’æ¤œè¨ã™ã‚‹ã¨ã‚¹ãƒ ãƒ¼ã‚ºã§ã™ã€‚</div>
    </div>
  </article>

  <aside class="toc" aria-label="ç›®æ¬¡">
    <h2>ç›®æ¬¡</h2>
    <nav id="toc-nav">
      <!-- populated by JS -->
    </nav>
  </aside>
</div>

  </main>


  <footer role="contentinfo">
    <div class="footer-inner">
      <div>Â© 2025 YaMac33</div>
      <div>å…¬é–‹æ—¥: <time datetime="2025-08-18">2025/08/18</time></div>
    </div>
  </footer>


  <script>
    // ===== Generate TOC from h2 =====
    (function(){
      const article = document.querySelector('article.post');
      const headings = article.querySelectorAll('h2[id]');
      const nav = document.getElementById('toc-nav');
      if(!nav || !headings.length) return;
      const ul = document.createElement('ul');
      ul.style.listStyle='none';ul.style.margin='0';ul.style.padding='0';
      headings.forEach(h=>{
        const li=document.createElement('li');
        const a=document.createElement('a');
        a.href='#'+h.id; a.textContent=h.textContent;
        li.appendChild(a); ul.appendChild(li);
      });
      nav.appendChild(ul);

      // Smooth scroll
      nav.addEventListener('click', (e)=>{
        if(e.target.tagName.toLowerCase()==='a'){
          e.preventDefault();
          const id = e.target.getAttribute('href').slice(1);
          const target = document.getElementById(id);
          if(target){
            const y = target.getBoundingClientRect().top + window.pageYOffset - 80;
            window.scrollTo({top:y,behavior:'smooth'});
          }
        }
      });

      // Scroll spy
      const links = nav.querySelectorAll('a');
      const map = new Map();
      links.forEach(a=>{
        const id=a.getAttribute('href').slice(1);
        const el=document.getElementById(id);
        if(el) map.set(el,a);
      });
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          const a = map.get(entry.target);
          if(!a) return;
          if(entry.isIntersecting){
            links.forEach(l=>l.classList.remove('active'));
            a.classList.add('active');
          }
        });
      },{rootMargin:'-40% 0px -55% 0px',threshold:[0,1]});
      map.forEach((_,el)=>io.observe(el));
    })();

    // ===== Code block copy buttons =====
    (function(){
      function copyText(text){
        if(navigator.clipboard && window.isSecureContext){
          return navigator.clipboard.writeText(text);
        }else{
          const ta=document.createElement('textarea');
          ta.value=text; ta.style.position='fixed'; ta.style.top='-1000px';
          document.body.appendChild(ta); ta.focus(); ta.select();
          try{document.execCommand('copy');}finally{document.body.removeChild(ta);}
          return Promise.resolve();
        }
      }
      document.querySelectorAll('pre').forEach(pre=>{
        const btn = pre.querySelector('.copy-btn');
        const code = pre.querySelector('code');
        if(!btn || !code) return;
        btn.addEventListener('click', async ()=>{
          const raw = code.textContent.replace(/\u00A0/g,' ');
          try{
            await copyText(raw);
            btn.textContent='Copied';
            btn.classList.add('done');
            setTimeout(()=>{btn.textContent='Copy';btn.classList.remove('done');},1400);
          }catch(e){
            btn.textContent='Error';
          }
        });
      });
    })();

    // ===== Enhance code with light syntax tint (very light, no parser) =====
    (function(){
      document.querySelectorAll('pre code').forEach(code=>{
        if(code.dataset.tinted) return;
        let html = code.innerHTML;
        // very naive HTML-ish tint
        html = html
          .replace(/&lt;!--[\s\S]*?--&gt;/g, m=>'<span class="tok-cmt">'+m+'</span>')
          .replace(/(&lt;\/?)([a-zA-Z0-9-]+)(\s|&gt;)/g, (_,a,tag,c)=> a+'<span class="tok-tag">'+tag+'</span>'+c)
          .replace(/([a-zA-Z-:]+)=(&quot;[^&]*&quot;)/g, (_,attr,val)=>'<span class="tok-attr">'+attr+'</span>='+ '<span class="tok-str">'+val+'</span>');
        code.innerHTML = html;
        code.dataset.tinted = "1";
      });
    })();
  </script>


</body>
</html>

