<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>25.08.25 ReplitからRenderへの移行ガイド</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
        }
        /* カスタムスタイル */
        .info-box {
            background-color: #eef2ff;
            border-left: 4px solid #6366f1;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }
        .warning-box {
            background-color: #fffbeb;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }
        .code-block-container {
            position: relative;
        }
        .copy-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #4b5563;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-button:hover {
            background-color: #6b7280;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="max-w-4xl mx-auto p-4 sm:p-8 md:p-12">
        <div class="bg-white p-6 sm:p-8 md:p-10 rounded-2xl shadow-lg">
            
            <!-- ヘッダー -->
            <header class="mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-2">ReplitからRenderへの移行ガイド</h1>
                <p class="text-slate-500">2025年8月25日</p>
                <hr class="mt-4">
            </header>

            <!-- 導入 -->
            <p class="text-base leading-relaxed mb-8">
                ReplitからRenderへの移行は、いくつかの設定ファイルを追加し、環境変数を再設定するだけで完了します。以下に、その手順を詳しく解説します。
            </p>

            <!-- メインコンテンツ -->
            <main>
                <h2 class="text-2xl font-bold text-slate-900 mb-4 pb-2 border-b-2 border-indigo-500">Renderデプロイガイド</h2>
                <p class="mb-8 text-base leading-relaxed">
                    デプロイ作業は、大きく分けて<strong>「1. Replitでの準備」</strong>と<strong>「2. Renderでの設定」</strong>の2つのステップで行います。
                </p>

                <!-- ステップ1: Replitでの準備 -->
                <section class="mb-12">
                    <h3 class="text-xl font-semibold text-slate-800 mb-6 flex items-center">
                        <span class="bg-indigo-500 text-white rounded-full h-8 w-8 flex items-center justify-center mr-3 font-bold">1</span>
                        Replitでの準備
                    </h3>
                    <p class="mb-6 text-base leading-relaxed">Renderがあなたのプロジェクトを正しくビルド（構築）できるように、2つの設定ファイルを作成します。</p>
                    
                    <div class="pl-4 border-l-2 border-slate-200 ml-4">
                        <h4 class="font-bold text-lg mb-3">① requirements.txt の作成</h4>
                        <p class="mb-4">このファイルは、プロジェクトが必要とするPythonライブラリの一覧です。Replitのファイルツリーで、<code>app.py</code>と同じ階層に<code>requirements.txt</code>という名前の新しいファイルを作成し、以下の内容をコピー＆ペーストしてください。</p>
                        <div class="code-block-container bg-slate-800 rounded-lg mb-4">
                            <pre class="text-white p-4 overflow-x-auto"><code id="code1">gunicorn
flask</code></pre>
                            <button class="copy-button" onclick="copyToClipboard('code1', this)">コピー</button>
                        </div>
                        <div class="info-box">
                            <p class="font-semibold mb-2">📝 gunicornとは？</p>
                            <p class="text-sm text-indigo-800">gunicornは、Flaskアプリを本番環境で安定して動かすための重要なソフトウェアです。Replitでは不要でしたが、Renderのような本番環境では必須となります。</p>
                        </div>

                        <h4 class="font-bold text-lg mt-8 mb-3">② GitHubへの接続</h4>
                        <p class="mb-4">RenderはGitHubリポジトリから直接デプロイするのが最も簡単です。Replitの左側メニューにある「Git」アイコンをクリックします。まだ接続していない場合は、GitHubアカウントに接続し、新しいリポジトリを作成して、現在のプロジェクトのコードをすべて「コミット＆プッシュ」してください。</p>
                    </div>
                </section>

                <!-- ステップ2: Renderでの設定 -->
                <section>
                    <h3 class="text-xl font-semibold text-slate-800 mb-6 flex items-center">
                        <span class="bg-indigo-500 text-white rounded-full h-8 w-8 flex items-center justify-center mr-3 font-bold">2</span>
                        Renderでの設定
                    </h3>
                    <p class="mb-6 text-base leading-relaxed">ここからはRenderのダッシュボードで作業します。</p>

                    <div class="pl-4 border-l-2 border-slate-200 ml-4">
                        <h4 class="font-bold text-lg mb-3">① 新しいWebサービスの作成</h4>
                        <ol class="list-decimal list-inside space-y-2 mb-6">
                            <li>Renderのダッシュボードにログインします。</li>
                            <li>「New +」ボタンを押し、「Web Service」を選択します。</li>
                            <li>「Build and deploy from a Git repository」の画面で、先ほどReplitから作成したGitHubリポジトリの横にある「Connect」ボタンを押します。</li>
                        </ol>

                        <h4 class="font-bold text-lg mt-8 mb-3">② Webサービスの設定</h4>
                        <p class="mb-4">接続すると、デプロイ設定画面が表示されます。以下の通りに入力してください。</p>
                        <ul class="space-y-4 mb-6">
                            <li><strong>Name:</strong> サービスの名前です。好きな名前（例: my-chat-app）を入力してください。URLの一部になります。</li>
                            <li><strong>Region:</strong> <code>Singapore (Southeast Asia)</code> が日本から比較的近いのでおすすめです。</li>
                            <li><strong>Branch:</strong> <code>main</code> または <code>master</code> を選択します。</li>
                            <li><strong>Root Directory:</strong> 空欄のままでOKです。</li>
                            <li><strong>Runtime:</strong> <code>Python 3</code> を選択します。</li>
                            <li><strong>Build Command:</strong></li>
                            <div class="code-block-container bg-slate-800 rounded-lg my-2">
                                <pre class="text-white p-4 overflow-x-auto"><code id="code2">pip install -r requirements.txt</code></pre>
                                <button class="copy-button" onclick="copyToClipboard('code2', this)">コピー</button>
                            </div>
                            <li><strong>Start Command:</strong></li>
                             <div class="code-block-container bg-slate-800 rounded-lg my-2">
                                <pre class="text-white p-4 overflow-x-auto"><code id="code3">gunicorn app:app</code></pre>
                                <button class="copy-button" onclick="copyToClipboard('code3', this)">コピー</button>
                            </div>
                            <li><strong>Instance Type:</strong> <code>Free</code> を選択します。</li>
                        </ul>

                        <h4 class="font-bold text-lg mt-8 mb-3">③ 環境変数の設定（最重要！）</h4>
                        <p class="mb-4">これが一番重要なステップです。ReplitのSecretsに設定した情報を、Renderの環境変数にコピーします。</p>
                        <ol class="list-decimal list-inside space-y-2 mb-4">
                            <li>設定画面を下にスクロールし、「Advanced」をクリックして設定項目を開きます。</li>
                            <li>「Add Environment Variable」ボタンを押して、ReplitのSecretsにあるキーと値を一つずつ正確にコピー＆ペーストしていきます。</li>
                        </ol>
                        <p class="font-semibold mb-2">コピーするキー:</p>
                        <div class="code-block-container bg-slate-800 rounded-lg mb-4">
                            <pre class="text-white p-4 overflow-x-auto"><code id="code4">OPENAI_API_KEY
GCP_TYPE
GCP_PROJECT_ID
GCP_PRIVATE_KEY_ID
GCP_PRIVATE_KEY
GCP_CLIENT_EMAIL
GCP_CLIENT_ID
GCP_AUTH_URI
GCP_TOKEN_URI
GCP_AUTH_PROVIDER_X509_CERT_URL
GCP_CLIENT_X509_CERT_URL</code></pre>
                            <button class="copy-button" onclick="copyToClipboard('code4', this)">コピー</button>
                        </div>
                        <div class="warning-box">
                            <p class="font-semibold mb-2">※注意</p>
                            <p class="text-sm text-amber-800"><code>GCP_PRIVATE_KEY</code> は複数行にわたる長い文字列です。ReplitのSecretsから値をコピーする際は、改行も含めてすべて正確にコピーしてください。</p>
                        </div>

                        <h4 class="font-bold text-lg mt-8 mb-3">④ デプロイの実行</h4>
                        <ol class="list-decimal list-inside space-y-2 mb-4">
                            <li>すべての設定が終わったら、画面の一番下にある「Create Web Service」ボタンを押します。</li>
                            <li>ビルドとデプロイが自動的に開始されます。ログ画面が表示され、処理の様子を確認できます。</li>
                            <li>数分後、ログに「Your service is live 🎉」と表示されれば成功です！</li>
                        </ol>
                        <p>画面上部に表示される <code>https://your-app-name.onrender.com</code> というURLにアクセスして、アプリが正常に動作するか確認してください。</p>
                    </div>
                </section>
            </main>

            <!-- フッター -->
            <footer class="mt-12 pt-6 border-t">
                <p class="text-center text-lg text-slate-700 font-semibold">これで、あなたのチャットアプリは24時間稼働するWebサービスとして公開されました！</p>
                <p class="text-center text-slate-500 mt-2">本当にお疲れ様でした！</p>
            </footer>

        </div>
    </div>

    <script>
        function copyToClipboard(elementId, button) {
            const codeElement = document.getElementById(elementId);
            const textToCopy = codeElement.innerText;
            
            // execCommand is used for broader browser compatibility in this environment
            const textArea = document.createElement('textarea');
            textArea.value = textToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                button.textContent = 'コピーしました！';
                setTimeout(() => {
                    button.textContent = 'コピー';
                }, 2000);
            } catch (err) {
                console.error('コピーに失敗しました', err);
                button.textContent = '失敗';
                 setTimeout(() => {
                    button.textContent = 'コピー';
                }, 2000);
            }
            document.body.removeChild(textArea);
        }
    </script>

</body>
</html>
